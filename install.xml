<?xml version="1.0" encoding="utf-8" standalone="yes" ?>

<installation version="1.0">

	<info>
		<appname>Freenet</appname>
		<appversion>0.7.0 "Darknet"</appversion>
		<url>http://freenetproject.org/</url>
		<javaversion>1.5.0</javaversion>
		<uninstaller write="yes"/>
		<authors>
			<author name="Ian Clarke" email="ian@freenetproject.org"/>
			<author name="Florent DaigniÃ¨re" email="nextgens@freenetproject.org"/>
			<author name="Scott Miller" email="scgmille@freenetproject.org"/>
			<author name="Oskar Sandberg" email="oskar@freenetproject.org"/>
			<author name="Matthew Toseland" email="toad@freenetproject.org"/>
			<author name="Many unlisted volunteers" email=""/>
		</authors>
	</info>


	<!-- remove labels or icons on buttons ? -->
	<guiprefs width="640" height="480" resizable="no">
	</guiprefs>

	<locale>
		<langpack iso3="eng"/>
		<langpack iso3="fra"/>
		<langpack iso3="deu"/>
		<langpack iso3="ita"/>
		<langpack iso3="jpn"/>
		<langpack iso3="spa"/>
		<langpack iso3="dan"/>
		<langpack iso3="ell" />
		<langpack iso3="cat"/>
		<langpack iso3="ned"/>
		<langpack iso3="fin"/>
		<langpack iso3="swe"/>
		<langpack iso3="por"/>
		<langpack iso3="pol"/>
		<langpack iso3="rus"/>
		<langpack iso3="ukr"/>
		<langpack iso3="hun"/>
		<langpack iso3="svk"/>
		<langpack iso3="rom"/>
		<langpack iso3="mys"/>
		<langpack iso3="nor"/>
		<langpack iso3="chn"/>
		<langpack iso3="scg"/>
		<langpack iso3="cze"/>
		<langpack iso3="kor"/>
		<!-- <langpack iso3="epo"/> -->
	</locale>

	<variables>
		<variable name="DesktopShortcutCheckboxEnabled" value="true" />
		<variable name="InstallerFrame.logfilePath" value="$INSTALL_PATH/Uninstaller/install.log" />
		<variable name="app-version" value="0.7.0 &quot;Darknet&quot;"/>
		<variable name="released-on" value="Thursday 8 May 2008"/>
	</variables>

	<resources>
		<res src="RegistrySpec.xml" id="RegistrySpec.xml"/>
		<res src="ProcessPanel.Spec.xml" id="ProcessPanel.Spec.xml"/> 

		<res src="langpacks/fra.xml" id="packsLang.xml_fra"/>
		<res src="langpacks/chn.xml" id="packsLang.xml_chn"/>
		<res src="langpacks/deu.xml" id="packsLang.xml_deu"/>
		
		<res src="Win_shortcutSpec.xml" id="shortcutSpec.xml"/>
		<res src="Win_shortcutSpec.xml" id="Win_shortcutSpec.xml"/>
		<res src="Unix_shortcutSpec.xml" id="Unix_shortcutSpec.xml"/>
		
		<res src="res/img/title.png" id="installer.langsel.img"/>
		<res src="res/img/title.png" id="Installer.image"/>
		<res src="res/img/border1.png" id="Installer.image.0"/>
		<res src="res/img/border2.png" id="Installer.image.1"/>
		<res src="res/img/border3.png" id="Installer.image.2"/>
		<res src="res/img/border4.png" id="Installer.image.3"/>
		<res src="res/img/border5.png" id="Installer.image.4"/>
		<res src="res/img/border5.png" id="Installer.image.5"/>
		<res src="res/img/border6.png" id="Installer.image.6"/>
		<res src="res/img/border7.png" id="Installer.image.7"/>
	</resources>

	<!-- The listeners section for CustomActions -->
	<listeners>
		<listener installer="RegistryInstallerListener" uninstaller="RegistryUninstallerListener" os="windows"/>
	</listeners>

	<panels>
		<panel classname="CheckedHelloPanel"/>
		<panel classname="TargetPanel"/> 
		<panel classname="TreePacksPanel"/>
		<panel classname="InstallPanel"/>
		<panel classname="ProcessPanel"/>
		<panel classname="ShortcutPanel"/>
		<panel classname="SimpleFinishPanel"/>
	</panels>

	<packs>
		<pack name="Base" id="base" required="yes">
			<description>The base files</description>
			<fileset dir="res/" targetdir="$INSTALL_PATH">
				<exclude name="*/**/.svn"/>
				<exclude name="*/**/.svn/**"/>
				<include name="bin/**/*"/>
				<include name="wrapper.conf"/>
				<include name="startssl.pem"/>
				<include name="dont-close-me.html"/>
				<include name="dont-close-me*.html"/>
			</fileset>
		</pack>

		<pack name="License" id="license" required="yes" parent="base">
			<description>The licence files</description>
			<file src="res/license/LICENSE.Freenet" targetdir="$INSTALL_PATH"/>
			<file src="res/license/LICENSE.Mantissa" targetdir="$INSTALL_PATH"/>
			<file src="res/license/README" targetdir="$INSTALL_PATH"/>
		</pack>

		<pack name="Windows" id="windows" required="yes" parent="base">
			<os family="windows"/>
			<description>A windows specific catch-all pack</description>

			<fileset dir="res/windows/" targetdir="$INSTALL_PATH">
				<exclude name="*/**/.svn"/>
				<exclude name="*/**/.svn/**"/>
				<exclude name="bin/*.exe"/>
				<exclude name="lib/*.dll"/>
				<include name="*/**"/>
			</fileset>

			<fileset dir="offline" targetdir="$INSTALL_PATH">
				<exclude name="*/**/.svn"/>
				<exclude name="*/**/.svn/**"/>
				<include name="*/**"/>
			</fileset>

			<executable targetfile="$INSTALL_PATH\bin\remove_service.bat" keep="true" stage="uninstall"/>
			<parsable targetfile="$INSTALL_PATH\bin\cleanup.cmd"/>
			<parsable targetfile="$INSTALL_PATH\browse.cmd"/>
			<parsable targetfile="$INSTALL_PATH\bin\install_freenet-ext.cmd"/>
			<parsable targetfile="$INSTALL_PATH\bin\install_freenet-stable-latest.cmd"/>
			<parsable targetfile="$INSTALL_PATH\bin\install_plugins.cmd"/>
			<parsable targetfile="$INSTALL_PATH\bin\install_updater.cmd"/>
			<parsable targetfile="$INSTALL_PATH\bin\install_wrapper.cmd"/>
			<parsable targetfile="$INSTALL_PATH\bin\install_opennet.cmd"/>
			<parsable targetfile="$INSTALL_PATH\bin\setup.cmd"/>
		</pack>

		<pack name="Unix" id="unix" required="yes" parent="base">
			<os family="unix"/>
			<description>An UNIX specific catch-all pack</description>

			<fileset dir="res/unix/" targetdir="$INSTALL_PATH">
				<exclude name="*/**/.svn"/>
				<exclude name="*/**/.svn/**"/>
				<exclude name="bin/wrapper-*"/>
				<exclude name="lib/libwrapper-*"/>
				<include name="*/**"/>
			</fileset>

			<fileset dir="offline" targetdir="$INSTALL_PATH">
				<exclude name="*/**/.svn"/>
				<exclude name="*/**/.svn/**"/>
				<include name="*/**"/>
			</fileset>

			<executable targetfile="$INSTALL_PATH/run.sh" type="bin" stage="never" keep="true"/>
			<executable targetfile="$INSTALL_PATH/bin/setup.sh" type="bin" stage="never"/>
			<executable targetfile="$INSTALL_PATH/bin/browse.sh" type="bin" stage="never"/>
			<parsable targetfile="$INSTALL_PATH/bin/browse.sh"/> 
			<parsable targetfile="$INSTALL_PATH/bin/setup.sh"/> 
		</pack>

		<!-- Yes it's a rip of the unix one, but I haven't found any smarter way to do it! -->
		<pack name="MacOSX" id="mac" required="yes" parent="base">
			<os family="mac"/>
			<description>An MacOSx specific catch-all pack</description>

			<fileset dir="res/unix/" targetdir="$INSTALL_PATH">
				<exclude name="*/**/.svn"/>
				<exclude name="*/**/.svn/**"/>
				<exclude name="bin/wrapper-*"/>
				<exclude name="lib/libwrapper-*"/>
				<include name="*/**"/>
			</fileset>

			<fileset dir="offline" targetdir="$INSTALL_PATH">
				<exclude name="*/**/.svn"/>
				<exclude name="*/**/.svn/**"/>
				<include name="*/**"/>
			</fileset>

			<executable targetfile="$INSTALL_PATH/run.sh" type="bin" stage="never" keep="true"/>
			<executable targetfile="$INSTALL_PATH/bin/setup.sh" type="bin" stage="never"/>
			<executable targetfile="$INSTALL_PATH/bin/browse.sh" type="bin" stage="never"/>
			<parsable targetfile="$INSTALL_PATH/bin/browse.sh"/> 
			<parsable targetfile="$INSTALL_PATH/bin/setup.sh"/> 
		</pack>
		
		<pack name="UninstallStuff" id="uninstall" required="no" os="windows" parent="base">
			<description>Create uninstallation hooks in the registry</description>
			<parsable targetfile="$INSTALL_PATH\Uninstaller\uninstall.cmd"/>
		</pack>
		
		<pack name="AutoUpdater" id="autoupdater" required="no" parent="base">
			<description>Allow the node to auto-update over freenet securely. It's advised that you enable it to keep your node up-to-date.</description>
			<singlefile src="res/license/LICENSE.Freenet" target="$INSTALL_PATH/update"/>
		</pack>

		<pack name="OpenNet" id="opennet" required="no" parent="base">
			<description>The opennet seednodes file. Used to connect quickly (but insecurely) to the network. The node will ask whether to use this after install.</description>
			<singlefile src="res/license/LICENSE.Freenet" target="$INSTALL_PATH/opennet.install"/>
		</pack>
		
		<pack name="AutoStart" id="autostart" required="no" parent="base">
			<os family="unix"/>
			<os family="mac"/>
			<description>Start the node automatically on startup. Strongly recommended.</description>
			<singlefile src="res/license/LICENSE.Freenet" target="$INSTALL_PATH/autostart.install"/>
			<executable targetfile="$INSTALL_PATH/bin/remove_cronjob.sh" keep="true" stage="uninstall"/>
			<parsable targetfile="$INSTALL_PATH/bin/remove_cronjob.sh"/>
		</pack>

		<pack name="Firefox Profile" id="firefox_profile" required="yes" parent="base">
			<description>Sets a customized firefox profile up for freenet browsing. Strongly recommended.</description>
			<singlefile src="res/license/LICENSE.Freenet" target="$INSTALL_PATH/firefox_profile.install"/>
		</pack>

		<pack name="Plugins" id="plugins" required="no">
			<description>A set of plugins for freenet nodes</description>
		</pack>

		<pack name="UPnP" id="upnp" required="no" parent="plugins">
			<description>A plugin enabling the node to use Universal Plug and Play to determine your external internet address and set up port forwarding on your router. Note that this involves contacting your default gateway and may be a security risk on an untrusted LAN, however it improves connectivity significantly.</description>
			<singlefile src="res/license/LICENSE.Freenet" target="$INSTALL_PATH/upnp"/>
		</pack>

		<pack name="STUN" id="stun" required="no" parent="plugins">
			<description>A plugin enabling the node to use STUN to determine your external internet address. Note that this involves contacting an external server so may be a security risk, however it improves connectivity significantly for nodes behind a router with dynamic IP addresses (i.e. most nodes).</description>
			<singlefile src="res/license/LICENSE.Freenet" target="$INSTALL_PATH/stun"/>
		</pack>

		<pack name="MDNSDiscovery" id="mdns" required="no" parent="plugins">
			<description>A plugin enabling the node to use Zeroconf/Bonjour/Rendez-Vous to advertise itself to compatible clients, enabling them to self-auto-configure. Note that this plugin will "announce" that you are running a node on your local subnet.</description>
			<singlefile src="res/license/LICENSE.Freenet" target="$INSTALL_PATH/mdns"/>
		</pack>

		<pack name="XMLLibrarian" id="xmllibrarian" required="no" parent="plugins">
			<description>A plugin allowing you to search the freenet.</description>
			<singlefile src="res/license/LICENSE.Freenet" target="$INSTALL_PATH/xmllibrarian"/>
		</pack>
	</packs>

	<!-- The native libraries to add  http://svn.berlios.de/svnroot/repos/izpack/izpack-src/trunk/src/native/ -->
	<native type="3rdparty" name="COIOSHelper.dll" stage="both" os="windows"/>
	<native type="izpack" name="ShellLink.dll" stage="install" os="windows"/>
</installation>
